<!doctype html><html lang=en><head><title>CQRS - Time to Rewind · Jens Rantil
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Jens Rantil"><meta name=description content="For the last year I&rsquo;ve been thinking a lot about
CQRS
[1], Event
Sourcing and
distributed architecture using ZeroMQ. I first
stumbled across the concept of CQRS through the mailing list for a nerd
meetup in Helsingborg, Sweden. This led
me to a lot of CQRS
reading and
videos, and with that the Event
Sourcing data model.
To try out CQRS and Event Sourcing in practise, I started writing an
open source event store about a year ago. I named it
Rewind. This also opened up
for me to try some concepts that I had never tried before [2]."><meta name=keywords content="blog,developer,staff engineering,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="CQRS - Time to Rewind"><meta name=twitter:description content="For the last year I’ve been thinking a lot about CQRS [1], Event Sourcing and distributed architecture using ZeroMQ. I first stumbled across the concept of CQRS through the mailing list for a nerd meetup in Helsingborg, Sweden. This led me to a lot of CQRS reading and videos, and with that the Event Sourcing data model.
To try out CQRS and Event Sourcing in practise, I started writing an open source event store about a year ago. I named it Rewind. This also opened up for me to try some concepts that I had never tried before [2]."><meta property="og:url" content="https://jensrantil.github.io/posts/cqrs-time-to-rewind/"><meta property="og:site_name" content="Jens Rantil"><meta property="og:title" content="CQRS - Time to Rewind"><meta property="og:description" content="For the last year I’ve been thinking a lot about CQRS [1], Event Sourcing and distributed architecture using ZeroMQ. I first stumbled across the concept of CQRS through the mailing list for a nerd meetup in Helsingborg, Sweden. This led me to a lot of CQRS reading and videos, and with that the Event Sourcing data model.
To try out CQRS and Event Sourcing in practise, I started writing an open source event store about a year ago. I named it Rewind. This also opened up for me to try some concepts that I had never tried before [2]."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-05-19T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-10T13:33:12+01:00"><meta property="article:tag" content="CQRS"><meta property="article:tag" content="Distributed Architecture"><link rel=canonical href=https://jensrantil.github.io/posts/cqrs-time-to-rewind/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm+MTzNJdv80k+n0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/custom.min.2e198fefc57dcc517a51f5b2040b841f014759bd551d4dd18df6dd0c1b954a62.css integrity="sha256-LhmP78V9zFF6UfWyBAuEHwFHWb1VHU3RjfbdDBuVSmI=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://jensrantil.github.io/>Jens Rantil
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/pages/services/>Services</a></li><li class=navigation-item><a class=navigation-link href=/pages/about-me/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://jensrantil.github.io/posts/cqrs-time-to-rewind/>CQRS - Time to Rewind</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2013-05-19T00:00:00Z>May 19, 2013
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
4-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/cqrs/>CQRS</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/distributed-architecture/>Distributed Architecture</a></span></div></div></header><div class=post-content><p>For the last year I&rsquo;ve been thinking a lot about
<a href=http://www.cqrsinfo.com class=external-link target=_blank rel=noopener>CQRS</a>
[<a href=http://martinfowler.com/bliki/CQRS.html class=external-link target=_blank rel=noopener>1</a>], <a href=http://martinfowler.com/eaaDev/EventSourcing.html class=external-link target=_blank rel=noopener>Event
Sourcing</a> and
distributed architecture using <a href=http://www.zeromq.org class=external-link target=_blank rel=noopener>ZeroMQ</a>. I first
stumbled across the concept of CQRS through the mailing list for a <a href=http://www.meetup.com/SoftPub/ class=external-link target=_blank rel=noopener>nerd
meetup in Helsingborg</a>, Sweden. This led
me to a lot of CQRS
<a href=http://msdn.microsoft.com/en-us/library/jj554200.aspx class=external-link target=_blank rel=noopener>reading</a> and
<a href=http://cqrs.wordpress.com/video/ class=external-link target=_blank rel=noopener>videos</a>, and with that the Event
Sourcing data model.</p><p>To try out CQRS and Event Sourcing in practise, I started writing an
open source event store about a year ago. I named it
<a href=http://www.github.com/JensRantil/rewind class=external-link target=_blank rel=noopener>Rewind</a>. This also opened up
for me to try some concepts that I had never tried before [2].</p><h2 id=cqrs-and-event-sourcing>CQRS and Event Sourcing
<a class=heading-link href=#cqrs-and-event-sourcing><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>But first, let&rsquo;s Rewind ;). Rewind&rsquo;s
<a href=https://github.com/JensRantil/rewind/blob/develop/README.rst class=external-link target=_blank rel=noopener>README</a>
does a fairly good job at an elevator speech for <em>CQRS</em>:</p><blockquote><p>Have you ever been nervous of all those DBMSs schema changes when you
are deploying your applications? They are gonna take too long, or
break backward compatibility? Have you ever thought &ldquo;Crap, I wish I
had stored that information since earlier&rdquo;? Have you ever felt your
writing patterns and your reading patterns differ a lot, making things
harder to scale? Issues like these can be solved using <em>CQRS</em> and
<em>event sourcing</em>.</p><p><em>CQRS</em> (Command-Query Response Segregation) is an architectural
pattern that aims to solve these issues by splitting up your
architectural system into two parts:</p><ul><li>A <em>write side</em> that takes care of validating input and optimizes
for fast writes. The write side takes commands and outputs
corresponding events if the command validates correctly.</li><li>A <em>read side</em> that listens to incoming events from the write side.
The read side is optimized for fast reads and incrementally build
up state that can be queried fast.</li></ul><p>While not required, it is common to use messaging between the write
and read sides. This means that the system will be in an inconsistent
state from time to time. This is usually not an issue and came be
overcome in various ways.</p></blockquote><p>A couple of additional things to note about CQRS:</p><ul><li>As I see it, it is the architectural equivalent of the CQS design
pattern.</li><li>It is a pattern that decouples systems very well. This can have huge
implications when it comes to testability.</li><li>It&rsquo;s also worth noting that there are some similarities between
Domain Driven Design
(<a href=http://www.wikipedia.org/Domain-driven_design class=external-link target=_blank rel=noopener>DDD</a>) and CQRS.
Most vocabularies in DDD are used in CQRS; ubiquous language,
aggregates, aggregrate root, value objects, bounded contexts etc.</li></ul><p>The README then states about <em>Event Sourcing</em>:</p><blockquote><p>A common pattern used together with CQRS is <em>event sourcing</em>. The
concept can be summarized as using state changes as primary
persistence, instead of the final state. The state changes are called
<em>events</em> and they are generated by the write side and delivered to the
read side.</p><p>The events are persisted in an event store that sits inbetween the
read and write side of things. It takes care of three things:</p><ul><li>persisting all events to disk.</li><li>being a hub/broker replicating all events from the write to the
read side of things.</li><li>allowind fast querying of events so that different parts of the
system can be synced back on track and new components can be
brought back in play.</li></ul></blockquote><h2 id=rewind>Rewind
<a class=heading-link href=#rewind><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Question was, how would a CQRS/event sourced system behave in
production? Could it scale out? Could writes be partitioned? What about
fault tolerance? I was tired of heavy database schema changes, I wanted
a nouvaeu way of testing and question some of the common practices.</p><p>Enter <a href=http://www.github.com/JensRantil/rewind class=external-link target=_blank rel=noopener>Rewind</a>; Rewind was my
pet project for a <a href=https://github.com/JensRantil/rewind/graphs/commit-activity class=external-link target=_blank rel=noopener>major part of
2012</a>. It
was <em>a Python implementation of an event store that supported multiple
backends</em>. It really gave me an opportunity to try everything I wanted.</p><p>The development of Rewind halted at the beginning of 2013. From thereon,
I instead used the lessons I had learnt and rewrote Rewind&rsquo;s
functionality in <a href=http://www.golang.org class=external-link target=_blank rel=noopener>Go</a>. The project was named
<a href=https://www.github.com/JensRantil/gorewind class=external-link target=_blank rel=noopener>GoRewind</a>.</p><p>Within the next couple of blog posts I plan to write about what I&rsquo;ve
learnt from these two projects; design decisions, testability, ZeroMQ,
developing in Go among other things.</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2025
Jens Rantil
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.
[<a href=https://github.com/JensRantil/jensrantil.github.io/tree/db44097cbe38b90dcba91458a4ce1c1b1e9fa396 target=_blank rel=noopener>db44097</a>]</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-8QE7N3YHJ3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8QE7N3YHJ3")</script></body></html>